<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>index</title>
    <link rel="stylesheet" href="./css/index_style1.css">
    <script type="text/javascript">
        window.onload = function(){
            let img = document.getElementById("imgBox");
            let index = 1;
            let imgs = {
                width:1226,
                length:5
            }

            let leftBtn = document.getElementById("change-img-left");
            let rightBtn = document.getElementById("change-img-right");
            
            
            leftBtn.onclick = function(){
                index--;
                index = (index+imgs.length)%imgs.length;
                move(img,-(imgs.width*index),10,'left',()=>{
                    if(index === imgs.length-1){
                        index = 1;
                        img.style['left'] = -imgs.width + "px";
                        console.log(img.style['left']);   
                    }else if(index === 0){
                        index = imgs.length - 2;
                        console.log("haha")
                        img.style['left'] = -(imgs.length-2)*imgs.width + "px";
                    }
                });
            }

            rightBtn.onclick = function(){
                index++;
                index = index%imgs.length;
                move(img,-(imgs.width*index),10,'left',()=>{
                    if(index === imgs.length-1){
                        index = 1;
                        img.style['left'] = -imgs.width + "px";
                        console.log(img.style['left']);   
                    }else if(index === 0){
                        index = imgs.length - 2;
                        console.log("haha")
                        img.style['left'] = (imgs.length-2)*imgs.width + "px";
                    }
                });
            }
            let int = setInterval(() => {
                index++;
                index = index  % imgs.length;
                move(img,-(imgs.width*index),10,'left',()=>{
                    if(index === imgs.length-1){
                        index = 1;
                        img.style['left'] = -imgs.width + "px";
                        console.log(img.style['left']);   
                    }else if(index === 0){
                        index = imgs.length - 2;
                        console.log("haha")
                        img.style['left'] = (imgs.length-2)*imgs.width + "px";
                    }
                });
            }, 10000);

            // 得到对应的样式值
            function getStyle(obj,name){
                var ans=getComputedStyle(obj,null)[name];  //除了ie8
                if(window.getComputedStyle){
                    // 变量没有找到，会报错；属性没有找到，会直接返回undefined
                    return getComputedStyle(obj,null)[name];
                }
                else{
                    return obj.currentStyle[name];
                }
            }

            function move(obj,target,speed,attr,callback){
                clearInterval(obj.timer);
                //判断正负
                var current=parseInt(getStyle(obj,attr));
                // 获得当前的位置
                if(current>target){
                    speed=-speed;
                }
                // 如果当前位置大于目标位置，就需要回退
                // 调用的时候，勿需考虑方向
                obj.timer=setInterval(function(){
                    var oldValue=parseInt(getStyle(obj,attr));
                    var newValue=oldValue+speed;
                    if(speed>0&&newValue>target){
                        newValue=target;
                    }
                    if(speed<0&&newValue<target){
                        newValue=target;
                    }
                    obj.style[attr]=newValue+"px";
                    // 操作DOM元素
                    if(newValue==target) {
                        clearInterval(obj.timer);
                        // 函数将要执行完的时候进行执行，只执行一次
                        callback && callback();
                    }
                },10);
            }

        }
    </script>
</head>
<body>
    <div id="app">
        <div class="header">
<!-- 需要包括顶部黑框框和顶部的logo导航区 -->
            <div class="header-bar">
                <div class="header-container">
                    <div class="header-left">
                        <a href="">小米商城</a><span class="seperate">|</span><a href="">MIUI</a><span class="seperate">|</span><a href="">IoT</a><span class="seperate">|</span><a href="">云服务</a><span class="seperate">|</span><a href="">天星数科</a><span class="seperate">|</span><a href="">有品</a><span class="seperate">|</span><a href="">小爱开放平台</a><span class="seperate">|</span><a href="">企业团购</a><span class="seperate">|</span><a href="">资质证照</a><span class="seperate">|</span><a href="">协议规则</a><span class="seperate">|</span><a href="">下载app</a><span class="seperate">|</span><a href="">智能生活</a><span class="seperate">|</span><a href="">Selection Location</a>
                    </div>
                    <div class="header-right">
                        <a href="">购物车</a>  
                    </div>
                    <div class="header-mid">
                        <a href="">登录</a><span class="seperate">|</span><a href="">注册</a><span class="seperate">|</span><a href="">消息通知</a>
                    </div>
                </div>
            </div>
               
            <div class="header-main">
                <div class="header-main-container">
                    <a href="" title="小米官网" id="logo"></a>
                    <div class="main-list">
                        <ul>
                            <li>
                                <a href="">Xiaomi手机</a>
                            </li>
                            <li>
                                <a href="">Redmi红米</a>
                            </li>
                            <li>
                                <a href="">电视</a>
                            </li>
                            <li>
                                <a href="">笔记本</a>
                            </li>
                            <li>
                                <a href="">平板</a>
                            </li>
                            <li>
                                <a href="">家电</a>
                            </li>
                            <li>
                                <a href="">路由器</a>
                            </li>
                            <li>
                                <a href="">智能硬件</a>
                            </li>
                            <li>
                                <a href="">服务</a>
                            </li>
                            <li>
                                <a href="">社区</a>
                            </li>
                        </ul>
                    </div>
                    <form action="get">
                        <input id="inputText" type="text" value="商品">
                        <button value="">🔍</button>
                    </form>
                </div>
                
            </div>
        </div>
        <div class="nav-main">
            <div class="nav-top">
                <div class="nav-select">
                    <ul>
                        <li>手机</li>
                        <li>电视</li>
                        <li>笔记本 平板</li>
                        <li>家电</li>
                        <li>出行 穿戴</li>
                        <li>智能 路由器</li>
                        <li>电源 配件</li>
                        <li>健康 儿童</li>
                        <li>耳机 音箱</li>
                        <li>生活 箱包</li>
                    </ul>
                </div>
                
                <div id="change-img-left"></div>
                <div id="change-img-right"></div>
                <div id="imgBox">
                    <div class="img-roll thirdImg" ></div>
                    <div class="img-roll firstImg" ></div>
                    <div class="img-roll secondImg" ></div>
                    <div class="img-roll thirdImg" ></div>
                    <div class="img-roll firstImg" ></div>
                </div>
            </div>

        </div>

        <div class="container">
            <!-- 具体的商品展示区 -->
            <!-- 有不同主题的商品和大图片 -->
        </div>

        <div class="footer">
            <div class="footer-service">
                <!-- 简单 -->
                <ul>
                    <li>
                        <a href="">预约维修服务</a>
                    </li>
                    <li>
                        <a href="">7天无理由退货</a>
                    </li>
                    <li>
                        <a href="">15天免费换货</a>
                    </li>
                    <li>
                        <a href="">满69包邮</a>
                    </li>
                    <li>
                        <a href="">520余家售后网点</a>
                    </li>
                </ul>
            </div>
    
            <div class="footer-link"></div>
    
            <div class="footer-info"></div>
        </div>
    </div>
</body>
</html>